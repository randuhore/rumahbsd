document.addEventListener('DOMContentLoaded',function(){RumahBSD.init();initPageSpecificComponents();initAdditionalComponents();RumahBSD.initWhatsAppButtons()});function initPageSpecificComponents(){const currentPath=window.location.pathname;if(currentPath.endsWith('/index.html')||currentPath.endsWith('/')||currentPath===''){}else if(currentPath.includes('/property.html')){initPropertyPage()}else if(currentPath.includes('/properti/')){RumahBSD.initPropertyBannerSwiper();RumahBSD.initGalleryCarouselSwiper();RumahBSD.initRelatedSwipers()}else if(currentPath.includes('/house.html')){initHousePage()}else if(currentPath.includes('/rumah-dijual/')){RumahBSD.initDetailSwipers();RumahBSD.initRelatedSwipers();RumahBSD.initShareButtons()}else if(currentPath.includes('/galeri.html')){initGalleryPage()}}
function initAdditionalComponents(){document.querySelectorAll('a[href^="#"]').forEach(anchor=>{anchor.addEventListener('click',function(e){const targetId=this.getAttribute('href');if(targetId!=='#'){e.preventDefault();const target=document.querySelector(targetId);if(target){target.scrollIntoView({behavior:'smooth'})}}})})}
function initPropertyPage(){RumahBSD.initFilterForm();const resetFilterBtn=document.querySelector('.filter-reset-btn');if(resetFilterBtn){resetFilterBtn.addEventListener('click',function(){document.getElementById('priceRange').value='';document.getElementById('location').value='';document.getElementById('status').value='';document.getElementById('locationSearch').value='';const propertyCards=document.querySelectorAll('.property-card');propertyCards.forEach(card=>{card.style.display='flex'});const noResultsMsg=document.querySelector('.no-results-message');if(noResultsMsg){noResultsMsg.style.display='none'}})}
RumahBSD.initPropertyFilter('.property-card',function(){const priceRange=document.getElementById('priceRange').value;const location=document.getElementById('location').value;const status=document.getElementById('status').value;const searchInput=document.getElementById('locationSearch');const searchTerm=searchInput.value.trim().toLowerCase();const propertyCards=document.querySelectorAll('.property-card');let visibleCount=0;propertyCards.forEach(card=>{let showCard=!0;if(searchTerm){const cardLocation=card.querySelector('.property-location').textContent.toLowerCase();const cardName=card.querySelector('.property-name').textContent.toLowerCase();if(!cardLocation.includes(searchTerm)&&!cardName.includes(searchTerm)){showCard=!1}}
if(priceRange&&showCard){const cardPriceRange=card.getAttribute('data-price');if(cardPriceRange!==priceRange){showCard=!1}}
if(location&&showCard){const cardLocation=card.getAttribute('data-location');if(cardLocation!==location){showCard=!1}}
if(status&&showCard){const cardStatus=card.getAttribute('data-status');if(cardStatus!==status){showCard=!1}}
card.style.display=showCard?'flex':'none';if(showCard){visibleCount++}});RumahBSD.checkNoResults('.property-card[style="display: flex;"]','.properties-grid-container','Tidak ada properti yang sesuai dengan kriteria yang dipilih. Silakan coba kriteria lain.');const filterForm=document.querySelector('.filter-form');if(filterForm){filterForm.classList.remove('active');setTimeout(()=>{filterForm.style.display='none'},300)}})}
function initHousePage(){RumahBSD.initFilterForm();const resetFilterBtn=document.querySelector('.filter-reset-btn');if(resetFilterBtn){resetFilterBtn.addEventListener('click',function(){document.getElementById('priceRange').value='';document.getElementById('location').value='';document.getElementById('propertyType').value='';document.getElementById('locationSearch').value='';const houseCards=document.querySelectorAll('.house-type-card');houseCards.forEach(card=>{card.style.display='block'});const noResultsMsg=document.querySelector('.no-results-message');if(noResultsMsg){noResultsMsg.remove()}})}
RumahBSD.initPropertyFilter('.house-type-card',function(){const priceRange=document.getElementById('priceRange').value;const location=document.getElementById('location').value;const propertyType=document.getElementById('propertyType').value;const searchInput=document.getElementById('locationSearch');const searchTerm=searchInput.value.trim().toLowerCase();const houseCards=document.querySelectorAll('.house-type-card');houseCards.forEach(card=>{let showCard=!0;if(searchTerm){const cardLocation=card.querySelector('.house-location').textContent.toLowerCase();const cardName=card.querySelector('.house-name').textContent.toLowerCase();if(!cardLocation.includes(searchTerm)&&!cardName.includes(searchTerm)){showCard=!1}}
if(priceRange&&showCard){const price=parseInt(card.querySelector('.house-price').innerText.replace(/\D/g,''));const[min,max]=priceRange.split('-').map(val=>parseInt(val));if(price<min*1000000||price>max*1000000){showCard=!1}}
if(location&&showCard){const cardLocation=card.querySelector('.house-location').textContent.toLowerCase();if(!cardLocation.includes(location.toLowerCase())){showCard=!1}}
if(propertyType&&showCard){const cardTitle=card.querySelector('.house-name').innerText.toLowerCase();if(!cardTitle.includes(propertyType.toLowerCase())){showCard=!1}}
card.style.display=showCard?'block':'none'});RumahBSD.checkNoResults('.house-type-card[style="display: block;"]','.houses-grid-container','Tidak ada rumah yang sesuai dengan kriteria yang dipilih. Silakan coba kriteria lain.');const filterForm=document.querySelector('.filter-form');if(filterForm){filterForm.classList.remove('active');setTimeout(()=>{filterForm.style.display='none'},300)}})}
function initGalleryPage(){RumahBSD.initFilterForm();const galleryItems=document.querySelectorAll('.gallery-grid-item');galleryItems.forEach((item,index)=>{item.style.display='block';setTimeout(()=>{item.classList.add('show')},index*50)});if(typeof Fancybox!=='undefined'){Fancybox.bind('[data-fancybox="gallery"]',{loop:!0,backdropClick:'close',dragToClose:!1,Carousel:{friction:0.88,},wheel:!1,Image:{zoom:!1,},Thumbs:{autoStart:!0}})}
const resetFilterBtn=document.querySelector('.filter-reset-btn');if(resetFilterBtn){resetFilterBtn.addEventListener('click',function(){document.getElementById('photoType').value='';document.getElementById('houseType').value='';document.getElementById('locationSearch').value='';document.querySelectorAll('.category-btn').forEach(btn=>{btn.classList.remove('active')});const galleryItems=document.querySelectorAll('.gallery-grid-item');galleryItems.forEach((item,index)=>{item.style.display='block';setTimeout(()=>{item.classList.add('show')},index*30);const anchorElement=item.querySelector('a[data-fancybox]');if(anchorElement){anchorElement.setAttribute('data-fancybox','gallery')}});if(typeof Fancybox!=='undefined'){Fancybox.unbind('[data-fancybox]');Fancybox.bind('[data-fancybox="gallery"]',{loop:!0,backdropClick:'close',dragToClose:!1,Carousel:{friction:0.88,},wheel:!1,Image:{zoom:!1,},Thumbs:{autoStart:!0}})}
const noResultsMsg=document.querySelector('.no-results-message');if(noResultsMsg){noResultsMsg.style.display='none'}})}
RumahBSD.initPropertyFilter('.gallery-grid-item',function(){const photoType=document.getElementById('photoType').value;const houseType=document.getElementById('houseType').value;const searchInput=document.getElementById('locationSearch');const searchTerm=searchInput.value.trim().toLowerCase();if(typeof Fancybox!=='undefined'){Fancybox.unbind('[data-fancybox="gallery"]');Fancybox.close()}
const galleryItems=document.querySelectorAll('.gallery-grid-item');let visibleCount=0;galleryItems.forEach(item=>{const itemJenis=item.getAttribute('data-jenis');const itemTipe=item.getAttribute('data-tipe');const title=item.querySelector('.gallery-grid-overlay h3')?.textContent.toLowerCase()||'';const description=item.querySelector('.gallery-grid-overlay p')?.textContent.toLowerCase()||'';const text=title+' '+description;const isSearchMatch=!searchTerm||text.includes(searchTerm);const isPhotoTypeMatch=!photoType||itemJenis===photoType;const isHouseTypeMatch=!houseType||itemTipe===houseType;const anchorElement=item.querySelector('a[data-fancybox]');if(isSearchMatch&&isPhotoTypeMatch&&isHouseTypeMatch){item.style.display='block';item.classList.add('show');visibleCount++;if(anchorElement){anchorElement.setAttribute('data-fancybox','filtered-gallery')}}else{item.style.display='none';item.classList.remove('show');if(anchorElement){anchorElement.setAttribute('data-fancybox','hidden-gallery')}}});if(typeof Fancybox!=='undefined'){Fancybox.bind('[data-fancybox="filtered-gallery"]',{loop:!0,backdropClick:'close',dragToClose:!1,Carousel:{friction:0.88,},wheel:!1,Image:{zoom:!1,},Thumbs:{autoStart:!0}})}
setTimeout(()=>{const visibleItems=document.querySelectorAll('.gallery-grid-item[style="display: block;"]');const container=document.querySelector('.gallery-grid-container');let noResultsMsg=document.querySelector('.no-results-message');if(visibleItems.length===0){if(!noResultsMsg){noResultsMsg=document.createElement('div');noResultsMsg.className='no-results-message';noResultsMsg.innerHTML='<p>Tidak ada foto yang sesuai dengan filter yang dipilih. Silakan coba kriteria lain.</p>';container.appendChild(noResultsMsg)}
noResultsMsg.style.display='block'}else if(noResultsMsg){noResultsMsg.style.display='none'}},100);const filterForm=document.querySelector('.filter-form');if(filterForm){filterForm.classList.remove('active');setTimeout(()=>{filterForm.style.display='none'},300)}})}