const RumahBSD={init:function(){this.initNavbar();this.initChatPopup();this.initBackToTop();this.initFancybox();this.initHeroSwiper();this.initHouseSwipers();this.initGallerySwiper();this.initForms();this.initScrollAnimations()},initNavbar:function(){const navbar=document.querySelector('.navbar');const hamburger=document.querySelector('.hamburger');const navLinks=document.querySelector('.nav-links');if(!navbar||!hamburger||!navLinks)return;const handleNavbarScroll=()=>{if(window.scrollY>50){navbar.classList.add('scrolled')}else{navbar.classList.remove('scrolled')}};const toggleMobileMenu=()=>{hamburger.classList.toggle('active');navLinks.classList.toggle('active')};handleNavbarScroll();window.addEventListener('scroll',handleNavbarScroll);hamburger.addEventListener('click',toggleMobileMenu);navLinks.querySelectorAll('a').forEach(link=>{link.addEventListener('click',()=>{if(navLinks.classList.contains('active')){toggleMobileMenu()}})})},initChatPopup:function(){const chatPopup=document.getElementById('whatsappPopup');const showPopupBtn=document.getElementById('showChatPopup');const closePopupBtn=document.getElementById('closeChat');const sendBtn=document.getElementById('sendWhatsApp');const messageInput=document.getElementById('popupMessage');const chatMessages=document.querySelector('.chat-messages');if(!chatPopup||!showPopupBtn||!closePopupBtn)return;showPopupBtn.addEventListener('click',function(){chatPopup.classList.add('show')});closePopupBtn.addEventListener('click',function(){chatPopup.classList.remove('show')});function addMessage(text,isSent=!0){if(!chatMessages)return;const messageDiv=document.createElement('div');messageDiv.className=`message ${isSent ? 'sent' : 'received'}`;const currentTime=new Date();const hours=currentTime.getHours().toString().padStart(2,'0');const minutes=currentTime.getMinutes().toString().padStart(2,'0');const timeString=`${hours}:${minutes}`;const assetPath=window.location.pathname.includes('/pages/')?'../assets':'assets';const contentHtml=`
                ${!isSent ? '<div class="message-avatar"><img src="' + assetPath + '/images/global/foto-profil.jpg" alt="Customer Support"></div>' : ''}
                <div class="message-content">
                    <p>${text}</p>
                    <span class="message-time">${timeString}</span>
                </div>
            `;messageDiv.innerHTML=contentHtml;chatMessages.appendChild(messageDiv);chatMessages.scrollTop=chatMessages.scrollHeight}
function sendMessage(){if(!messageInput||!sendBtn)return;const message=messageInput.value.trim();if(!message)return;addMessage(message);messageInput.value='';setTimeout(()=>{const phoneNumber='6285601081492';const encodedMessage=encodeURIComponent(message);const whatsappURL=`https://wa.me/${phoneNumber}?text=${encodedMessage}`;window.open(whatsappURL,'_blank');chatPopup.classList.remove('show')},1000)}
if(sendBtn){sendBtn.addEventListener('click',sendMessage)}
if(messageInput){messageInput.addEventListener('keypress',function(e){if(e.key==='Enter'){e.preventDefault();sendMessage()}})}},initBackToTop:function(){const backToTopButton=document.getElementById('backToTop');if(!backToTopButton)return;window.addEventListener('scroll',function(){if(window.scrollY>500){backToTopButton.classList.add('visible')}else{backToTopButton.classList.remove('visible')}});backToTopButton.addEventListener('click',function(){window.scrollTo({top:0,behavior:'smooth'})})},initFancybox:function(){if(typeof Fancybox!=='undefined'){Fancybox.bind('[data-fancybox]',{loop:!0,backdropClick:'close',dragToClose:!1,Carousel:{friction:0.88,},wheel:!1,Image:{zoom:!1,},Thumbs:{autoStart:!0}})}},initHeroSwiper:function(){const heroSwiperElement=document.querySelector('.heroSwiper');if(!heroSwiperElement)return;new Swiper(heroSwiperElement,{slidesPerView:1,spaceBetween:0,loop:!0,autoplay:{delay:5000,disableOnInteraction:!1,},pagination:{el:'.heroSwiper .swiper-pagination',clickable:!0,},navigation:{nextEl:'.heroSwiper .swiper-button-next',prevEl:'.heroSwiper .swiper-button-prev',}})},initHouseSwipers:function(){const houseSwipers=document.querySelectorAll('.houseSwiper');if(houseSwipers.length===0)return;houseSwipers.forEach((swiperElement,index)=>{new Swiper(swiperElement,{slidesPerView:1,spaceBetween:0,loop:!0,pagination:{el:swiperElement.querySelector('.swiper-pagination'),clickable:!0,},navigation:{nextEl:swiperElement.querySelector('.swiper-button-next'),prevEl:swiperElement.querySelector('.swiper-button-prev'),},effect:'slide',speed:500,})})},initRelatedSwipers:function(){const relatedSwipers=document.querySelectorAll('.relatedSwiper');if(relatedSwipers.length===0)return;relatedSwipers.forEach((swiperElement)=>{new Swiper(swiperElement,{slidesPerView:1,spaceBetween:0,loop:!0,pagination:{el:swiperElement.querySelector('.swiper-pagination'),clickable:!0,},navigation:{nextEl:swiperElement.querySelector('.swiper-button-next'),prevEl:swiperElement.querySelector('.swiper-button-prev'),}})})},initGallerySwiper:function(){const gallerySwiperElement=document.querySelector('.gallerySwiper');if(!gallerySwiperElement)return;new Swiper(gallerySwiperElement,{slidesPerView:'auto',spaceBetween:20,centeredSlides:!1,pagination:{el:'.gallerySwiper .swiper-pagination',clickable:!0,},navigation:{nextEl:'.gallerySwiper .swiper-button-next',prevEl:'.gallerySwiper .swiper-button-prev',},breakpoints:{320:{slidesPerView:1,spaceBetween:20},640:{slidesPerView:2,spaceBetween:20},1024:{slidesPerView:3,spaceBetween:20}}})},initGalleryCarouselSwiper:function(){const galleryCarouselElement=document.querySelector('.galleryCarouselSwiper');if(!galleryCarouselElement)return;new Swiper(galleryCarouselElement,{slidesPerView:1,spaceBetween:20,loop:!0,autoplay:{delay:4000,disableOnInteraction:!1,},pagination:{el:'.galleryCarouselSwiper .swiper-pagination',clickable:!0,},navigation:{nextEl:'.galleryCarouselSwiper .swiper-button-next',prevEl:'.galleryCarouselSwiper .swiper-button-prev',},breakpoints:{640:{slidesPerView:2,spaceBetween:20,},1024:{slidesPerView:3,spaceBetween:30,},},})},initDetailSwipers:function(){const thumbSwiper=document.querySelector('.detailThumbSwiper');const mainSwiper=document.querySelector('.detailMainSwiper');if(!thumbSwiper||!mainSwiper)return;const thumbSwiperInstance=new Swiper(thumbSwiper,{spaceBetween:10,slidesPerView:'auto',freeMode:!0,watchSlidesProgress:!0,});new Swiper(mainSwiper,{spaceBetween:10,navigation:{nextEl:'.detailMainSwiper .swiper-button-next',prevEl:'.detailMainSwiper .swiper-button-prev',},thumbs:{swiper:thumbSwiperInstance,},loop:!0,autoplay:{delay:5000,disableOnInteraction:!1,}})},initPropertyBannerSwiper:function(){const propertyBannerElement=document.querySelector('.propertyBannerSwiper');if(!propertyBannerElement)return;new Swiper(propertyBannerElement,{slidesPerView:1,spaceBetween:0,loop:!0,autoplay:{delay:5000,disableOnInteraction:!1,},pagination:{el:'.propertyBannerSwiper .swiper-pagination',clickable:!0,},navigation:{nextEl:'.propertyBannerSwiper .swiper-button-next',prevEl:'.propertyBannerSwiper .swiper-button-prev',},effect:'slide',speed:800})},initShareButtons:function(){const facebookBtn=document.querySelector('.share-btn.facebook-btn');const twitterBtn=document.querySelector('.share-btn.twitter-btn');const whatsappBtn=document.querySelector('.share-btn.whatsapp-btn');const telegramBtn=document.querySelector('.share-btn.telegram-btn');const copyLinkBtn=document.getElementById('copyLinkBtn');if(!facebookBtn&&!twitterBtn&&!whatsappBtn&&!telegramBtn&&!copyLinkBtn)return;const pageUrl=encodeURIComponent(window.location.href);const pageTitle=encodeURIComponent(document.title);if(facebookBtn){facebookBtn.href=`https://www.facebook.com/sharer/sharer.php?u=${pageUrl}`}
if(twitterBtn){twitterBtn.href=`https://twitter.com/intent/tweet?text=${pageTitle}&url=${pageUrl}`}
if(whatsappBtn){whatsappBtn.href=`https://api.whatsapp.com/send?text=${pageTitle}%20${pageUrl}`}
if(telegramBtn){telegramBtn.href=`https://telegram.me/share/url?url=${pageUrl}&text=${pageTitle}`}
if(copyLinkBtn){copyLinkBtn.addEventListener('click',function(){const tempInput=document.createElement('input');tempInput.value=window.location.href;document.body.appendChild(tempInput);tempInput.select();document.execCommand('copy');document.body.removeChild(tempInput);const tooltip=document.createElement('div');tooltip.textContent='Link disalin!';tooltip.style.position='absolute';tooltip.style.backgroundColor='#292357';tooltip.style.color='white';tooltip.style.padding='5px 10px';tooltip.style.borderRadius='5px';tooltip.style.fontSize='12px';tooltip.style.top=(this.offsetTop-30)+'px';tooltip.style.left=(this.offsetLeft+this.offsetWidth/2-40)+'px';tooltip.style.zIndex='1000';tooltip.style.transition='opacity 0.3s';document.body.appendChild(tooltip);setTimeout(function(){tooltip.style.opacity='0';setTimeout(function(){document.body.removeChild(tooltip)},300)},2000)})}},initForms:function(){this.initNewsletterForm()},initNewsletterForm:function(){const newsletterForm=document.getElementById('newsletterForm');if(!newsletterForm)return;newsletterForm.addEventListener('submit',function(e){e.preventDefault();const nameInput=document.getElementById('nameNewsletter');const whatsappInput=document.getElementById('whatsappNewsletter');const emailInput=document.getElementById('emailNewsletter');const name=nameInput.value.trim();const whatsapp=whatsappInput.value.trim();const email=emailInput.value.trim();if(!name||!whatsapp||!email){alert('Silakan lengkapi semua data');return}
alert('Terima kasih! Data Anda berhasil didaftarkan.');nameInput.value='';whatsappInput.value='';emailInput.value=''})},initWhatsAppButtons:function(){const whatsappButtons=document.querySelectorAll('.house-whatsapp-btn');if(whatsappButtons.length===0)return;whatsappButtons.forEach(button=>{button.addEventListener('click',function(e){e.preventDefault();const productName=this.getAttribute('data-product');const message=`Halo, saya tertarik dengan ${productName}. Mohon informasi lebih lanjut.`;window.open(`https://wa.me/6285601081492?text=${encodeURIComponent(message)}`,'_blank')})})},initScrollAnimations:function(){this.initContactSectionAnimations();this.initFooterAnimations();this.initProjectsAnimations()},initContactSectionAnimations:function(){const profileContainer=document.querySelector('.profile-container');const contactInfoContainer=document.querySelector('.contact-info-container');const contactItems=document.querySelectorAll('.contact-item');if(!profileContainer&&!contactInfoContainer)return;function isInViewport(element){const rect=element.getBoundingClientRect();return(rect.top<=(window.innerHeight||document.documentElement.clientHeight)*0.8&&rect.bottom>=0)}
function checkVisibility(){if(profileContainer&&isInViewport(profileContainer)){profileContainer.classList.add('animate-in')}
if(contactInfoContainer&&isInViewport(contactInfoContainer)){contactInfoContainer.classList.add('animate-in');contactItems.forEach((item,index)=>{setTimeout(()=>{item.classList.add('animate-in')},150*index)})}}
if(profileContainer){profileContainer.style.opacity='0';profileContainer.style.transform='translateY(30px)';profileContainer.style.transition='opacity 0.8s ease, transform 0.8s ease'}
if(contactInfoContainer){contactInfoContainer.style.opacity='0';contactInfoContainer.style.transform='translateY(30px)';contactInfoContainer.style.transition='opacity 0.8s ease, transform 0.8s ease'}
contactItems.forEach(item=>{item.style.opacity='0';item.style.transform='translateX(20px)';item.style.transition='opacity 0.6s ease, transform 0.6s ease'});if(!document.querySelector('style#animation-styles')){const styleElement=document.createElement('style');styleElement.id='animation-styles';styleElement.textContent=`
                .animate-in {
                    opacity: 1 !important;
                    transform: translate(0, 0) !important;
                }
                .fade-in {
                    opacity: 1 !important;
                    transform: translateY(0) !important;
                }
            `;document.head.appendChild(styleElement)}
window.addEventListener('scroll',checkVisibility);setTimeout(checkVisibility,300)},initFooterAnimations:function(){const footer=document.querySelector('.footer-section');const footerItems=document.querySelectorAll('.ft-links, .ft-contact, .ft-newsletter');if(!footer||footerItems.length===0)return;function isInViewport(element){const rect=element.getBoundingClientRect();return(rect.top<=(window.innerHeight||document.documentElement.clientHeight)*0.85&&rect.bottom>=0)}
function checkFooterVisibility(){if(footer&&isInViewport(footer)){footerItems.forEach((item,index)=>{setTimeout(()=>{item.classList.add('fade-in')},150*index)});window.removeEventListener('scroll',checkFooterVisibility)}}
footerItems.forEach(item=>{item.style.opacity='0';item.style.transform='translateY(20px)';item.style.transition='opacity 0.5s ease, transform 0.5s ease'});if(!document.querySelector('style#animation-styles')){const fadeInStyle=document.createElement('style');fadeInStyle.id='animation-styles';fadeInStyle.textContent=`
                .fade-in {
                    opacity: 1 !important;
                    transform: translateY(0) !important;
                }
                .animate-in {
                    opacity: 1 !important;
                    transform: translate(0, 0) !important;
                }
            `;document.head.appendChild(fadeInStyle)}
window.addEventListener('scroll',checkFooterVisibility);setTimeout(checkFooterVisibility,300)},initProjectsAnimations:function(){const projectCards=document.querySelectorAll('.project-card');if(projectCards.length===0)return;function isInViewport(element){const rect=element.getBoundingClientRect();return(rect.top<=(window.innerHeight||document.documentElement.clientHeight)*0.8&&rect.bottom>=0)}
function checkVisibility(){projectCards.forEach(card=>{if(isInViewport(card)){card.classList.add('fade-in')}})}
projectCards.forEach(card=>{card.style.opacity='0';card.style.transform='translateY(30px)';card.style.transition='opacity 0.6s ease, transform 0.6s ease'});if(!document.querySelector('style#animation-styles')){const styleElement=document.createElement('style');styleElement.id='animation-styles';styleElement.textContent=`
                .fade-in {
                    opacity: 1 !important;
                    transform: translateY(0) !important;
                }
                .animate-in {
                    opacity: 1 !important;
                    transform: translate(0, 0) !important;
                }
            `;document.head.appendChild(styleElement)}
window.addEventListener('scroll',checkVisibility);setTimeout(checkVisibility,300)},initFilterForm:function(){const toggleFilterBtn=document.querySelector('.toggle-filter-btn');const filterForm=document.querySelector('.filter-form');if(!toggleFilterBtn||!filterForm)return;toggleFilterBtn.addEventListener('click',function(){filterForm.classList.toggle('active');if(filterForm.classList.contains('active')){filterForm.style.display='flex'}else{setTimeout(()=>{filterForm.style.display='none'},300)}})},initPropertyFilter:function(itemSelector,filterHandler){const filterBtn=document.querySelector('.filter-btn');const searchInput=document.getElementById('locationSearch');const searchBtn=document.querySelector('.search-btn');if(!filterBtn||!searchInput||!searchBtn)return;filterBtn.addEventListener('click',filterHandler);searchBtn.addEventListener('click',function(){const searchTerm=searchInput.value.trim().toLowerCase();RumahBSD.applySearch(itemSelector,searchTerm);if(filterHandler)filterHandler();});searchInput.addEventListener('keyup',function(e){if(e.key==='Enter'){const searchTerm=searchInput.value.trim().toLowerCase();RumahBSD.applySearch(itemSelector,searchTerm);if(filterHandler)filterHandler();}})},applySearch:function(itemSelector,searchTerm){const items=document.querySelectorAll(itemSelector);items.forEach(item=>{const searchableText=item.textContent.toLowerCase();if(searchTerm===''||searchableText.includes(searchTerm)){item.classList.add('search-match')}else{item.classList.remove('search-match')}})},checkNoResults:function(itemSelector,containerSelector,message){const visibleItems=Array.from(document.querySelectorAll(itemSelector)).filter(item=>item.style.display!=='none');const container=document.querySelector(containerSelector);let noResultsMsg=document.querySelector('.no-results-message');if(visibleItems.length===0){if(!noResultsMsg){noResultsMsg=document.createElement('div');noResultsMsg.className='no-results-message';noResultsMsg.innerHTML=`<p>${message || 'Tidak ada hasil yang sesuai dengan filter yang dipilih.'}</p>`;container.appendChild(noResultsMsg)}
noResultsMsg.style.display='block'}else if(noResultsMsg){noResultsMsg.style.display='none'}}}